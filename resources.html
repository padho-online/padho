<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Onlibry | Educational Resources & Study Materials</title>
<meta name="description" content="Access a variety of free educational resources including notes, guides, and study materials for different courses.">
<link rel="canonical" href="https://onlibry.xyz/resources.html">
    <meta name="keywords" content="free books, past papers, study materials, Onlibry library, online education, Degree Books, Degree materials, Degree notes, University updates">
    <meta name="author" content="Onlibry">
    
    <!-- Open Graph for Facebook & WhatsApp -->
    <meta property="og:title" content="Onlibry | Free Digital Library">
    <meta property="og:description" content="Download books, past papers & more for free.">
    <meta property="og:image" content="https://onlibry.xyz/logo.png">
    <meta property="og:url" content="https://onlibry.xyz/">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card for better preview -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Onlibry | Free Educational Resources">
    <meta name="twitter:description" content="Get free books, past papers, and study materials.">
    <meta name="twitter:image" content="https://onlibry.xyz/logo.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="icon" type="image/png" href="logo transparent.png">
    <link rel="stylesheet" href="resources.css">
    <script src="security.js"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NH4N1LBHRQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NH4N1LBHRQ');
</script>
</head>
<body>  
    <header class="header">
        <div class="logo">
            <span><a href="index.html" ><img src="logo transparent.png" alt="logo"></a></div>
        <nav role="navigation">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="books.html">Books</a></li>
                <li><a href="resources.html" class="active">Resources</a></li> 
                <li><a href="papers.html" >Papers</a></li>
                <li><a href="videos.html">Videos</a></li>
                <li><a href="feedback.html">Feedback</a></li>
            </ul>
        </nav>
    </header>
    <div class="filter-section">
        <h3>FILTER <i class="fas fa-filter"></i></h3>
        <div class="row">
            <div class="col-md-3">
                <label for="SUBJECT">SUBJECT</label>
                <select id="SUBJECT" class="form-control">
                    <option value="ALL">ALL</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>

                </select>
            </div>
            <div class="col-md-3">
                <label for="TOPICS">TOPICS</label>
                <select id="TOPICS" class="form-control">
                    <option value="ALL">ALL</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="LEVEL">LEVEL</label>
                <select id="LEVEL" class="form-control">
                    <option value="ALL">ALL</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="RESOURCE TYPE">RESOURCE TYPE</label>
                <select id="RESOURCE TYPE" class="form-control">
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
<option value="Loading information...">Loading...</option>
                    
                </select>
            </div>
            <div class="col-md-3 d-flex align-items-end">
                <button class="btn btn-success me-2" id="search-filter">Search Filter</button>
                <button class="btn btn-danger" id="show-all-clear-filter">Show All / Clear Filter</button>
            </div>
            <div class="col-md-12 mt-3">
                <input type="text" id="search-bar" class="form-control" placeholder="Search all items...">
            </div>
        </div>
    </div>
    <div class="table-section">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>SUBJECT</th>
                    <th>TOPIC</th>
                    <th>SUB-TOPIC</th>
                    <th>TITLE</th>
                    <th>COURSE-LEVEL</th>
                    <th>RESOURCE-TYPE<br> (Click here)</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <tr>
                    <td class="subjects">Loading information...</td>
                    <td class="topics">Loading information...</td>
                    <td class="sub-topics">Loading information...</td>
                    <td class="title">Loading information...</td>
                    <td class="course-level">Loading information...</td>
                    <td class="resource-type">Loading information...</td>
                    
                    </tr>
                     <tr>
                    <td class="subjects">Loading information...</td>
                    <td class="topics">Loading information...</td>
                    <td class="sub-topics">Loading information...</td>
                    <td class="title">Loading information...</td>
                    <td class="course-level">Loading information...</td>
                    <td class="resource-type">Loading information...</td>
                    
                    </tr>
                    
                
                 
            </tbody>
        </table>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const apiUrl = "https://script.google.com/macros/s/AKfycbwX7m6uCiPMSQPFoMO2khxzEuUnjkFHzCiVfQwp-uG9umcpFB3EmTqlK8kpbQm11vWZ/exec";
            const tableBody = document.getElementById("table-body");
            const filterButton = document.getElementById("search-filter");
            const clearButton = document.getElementById("show-all-clear-filter");
            const searchBar = document.getElementById("search-bar");
    
            const subjectDropdown = document.getElementById("SUBJECT");
            const topicDropdown = document.getElementById("TOPICS");
            const levelDropdown = document.getElementById("LEVEL");
            const resourceDropdown = document.getElementById("RESOURCE TYPE");
    
            // Fetch data from API
            async function fetchData() {
                try {
                    const response = await fetch(apiUrl);
                    const data = await response.json();
                    renderTable(data);
                    updateDropdowns(data);
                } catch (error) {
                    console.error("Error fetching data:", error);
                }
            }
   // Populate dropdowns dynamically 
   function updateDropdowns(data) {
    let subjects = new Set(["ALL"]);
    let topics = new Set(["ALL"]);
    let levels = new Set(["ALL"]);
    let resources = new Set(["ALL"]);

    data.forEach(row => {
        subjects.add(row.SUBJECT);
        topics.add(row.TOPIC);
        levels.add(row["COURSE LEVEL"]);
        resources.add(row["RESOURCE TYPE"]);
    });

    populateDropdown(subjectDropdown, [...subjects].sort());
    populateDropdown(topicDropdown, [...topics].sort());
    populateDropdown(levelDropdown, [...levels].sort());
    populateDropdown(resourceDropdown, [...resources].sort());

    // Ensure 'ALL' is selected by default
    subjectDropdown.value = "ALL";
    topicDropdown.value = "ALL";
    levelDropdown.value = "ALL";
    resourceDropdown.value = "ALL";
}


// Function to populate a dropdown
function populateDropdown(dropdown, items) {
    dropdown.innerHTML = "";
    items.forEach(item => {
        let option = document.createElement("option");
        option.value = item.toLowerCase();
        option.textContent = item;
        dropdown.appendChild(option);
    });
}
            
function getFileId(url) {
    let match = url.match(/\/d\/([a-zA-Z0-9_-]+)/);
    return match ? match[1] : null;
}

// Render table dynamically
function renderTable(data) {
    tableBody.innerHTML = "";
    
    data.forEach(row => {
        let tr = document.createElement("tr");

        // Google Drive File Handling
        let fileId = getFileId(row.LINK);
        let viewerLink = fileId ? `viewer.html?fileId=${fileId}` : row.LINK;
        let resourceLink = row.LINK.trim() !== "#" 
            ? `<a href="${viewerLink}" target="_blank">${row["RESOURCE TYPE"]}</a>` 
            : row["RESOURCE TYPE"];

        tr.innerHTML = `
            <td class="subjects">${row.SUBJECT}</td>
            <td class="topics">${row.TOPIC}</td>
            <td class="sub-topics">${row["SUB-TOPIC"]}</td>
            <td class="title">${row.TITLE}</td>
            <td class="course-level">${row["COURSE LEVEL"]}</td>
            <td class="resource-type">${resourceLink}</td>
        `;

        tableBody.appendChild(tr);
    });
}
    
            // Filter table based on selected values
            function filterTable() {
                let subject = subjectDropdown.value.toLowerCase();
                let topic = topicDropdown.value.toLowerCase();
                let level = levelDropdown.value.toLowerCase();
                let resourceType = resourceDropdown.value.toLowerCase();
                let searchText = searchBar.value.toLowerCase();
    
                document.querySelectorAll("#table-body tr").forEach(row => {
                    let rowSubject = row.querySelector(".subjects").textContent.toLowerCase();
                    let rowTopic = row.querySelector(".topics").textContent.toLowerCase();
                    let rowLevel = row.querySelector(".course-level").textContent.toLowerCase();
                    let rowResourceType = row.querySelector(".resource-type").textContent.toLowerCase();
                    let rowText = row.textContent.toLowerCase();
    
                    let match = (subject === "all" || rowSubject.includes(subject)) &&
                                (topic === "all" || rowTopic.includes(topic)) &&
                                (level === "all" || rowLevel.includes(level)) &&
                                (resourceType === "all" || rowResourceType.includes(resourceType)) &&
                                (searchText === "" || rowText.includes(searchText));
    
                    row.style.display = match ? "" : "none";
                });
            }
    
            // Event listeners
            filterButton.addEventListener("click", filterTable);
            searchBar.addEventListener("input", filterTable);
    
            clearButton.addEventListener("click", function () {
                subjectDropdown.value = "all";
                topicDropdown.value = "all";
                levelDropdown.value = "all";
                resourceDropdown.value = "all";
                searchBar.value = "";
                filterTable();
            });
    
            // Initial fetch
            fetchData();
        });
    </script>
    <footer>
        <div class="fnav">
            <a href="about.html" class="fitem">About Us</a>
            <a href="privacy.html" class="fitem">Privacy Policy</a>
            <a href="feedback.html" class="fitem">Contact Us</a>
          </div>
          <div class="fcopy">
            <p>&copy; 2025 Onlibry.xyz. All rights reserved.</p>
          </div>
    </footer>
    
       </body>
       </html>
       

<!DOCTYPE html>
<html data-ad-client="ca-pub-6893553072614021">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICET Mock Test - Exam</title>
    <link rel="icon" type="image/png" href="https://onlibry.xyz/logo transparent.png">
    <script src="https://onlibry.xyz/security.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NH4N1LBHRQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NH4N1LBHRQ');
</script>
  <!-- AdSense Script -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6893553072614021"
     crossorigin="anonymous"></script>

<!-- Only Vignette + Anchor Ads -->
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6893553072614021",
    enable_page_level_ads: true,
    overlays: {
      bottom: true,
      vignette: true
    }
  });
</script>

   <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .timer {
            background-color: #e74c3c;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .exam-container {
            display: flex;
            gap: 20px;
        }
        
        .question-section {
            flex: 3;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .question-image {
            max-width: 100%;
            max-height: 300px;
            margin: 15px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .options {
            margin: 20px 0;
        }
        
        .option {
            display: block;
            margin: 10px 0;
            padding: 12px 15px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .option:hover {
            background-color: #e8f4fc;
            border-color: #3498db;
        }
        
        .option.selected {
            background-color: #d4e6f1;
            border-color: #2980b9;
        }
        
        .navigation {
            flex: 1;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
           max-height: 550px;
            overflow-y: auto;
        }
        
        .question-nav {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background-color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .nav-btn:hover {
            background-color: #f0f0f0;
        }
        
        .nav-btn.answered {
            background-color: #d4e6f1;
            border-color: #2980b9;
        }
        
        .nav-btn.marked {
            background-color: #f8d7da;
            border-color: #f1aeb5;
        }
        
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 18px;
        }
        
        .hidden {
            display: none;
        }
        .onlibry{
            color: cyan;
        }
@media (max-width: 768px) {
    body {
        padding: 10px;
    }

    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .header h2 {
        font-size: 18px;
    }

    .timer {
        font-size: 16px;
        align-self: flex-end;
    }

    .exam-container {
        flex-direction: column;
        gap: 15px;
    }

    .question-section,
    .navigation {
        width: 100%;
        padding: 15px;
    }

    .action-buttons {
        flex-direction: column;
        gap: 10px;
    }

    .btn {
        width: 100%;
        text-align: center;
    }

    .question-nav {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        gap: 10px;
    }

    .nav-btn {
        width: 35px;
        height: 35px;
        font-size: 14px;
        flex-shrink: 0;
    }
}
    </style>
</head>
<body>
    <div class="header">
        <h2>ICET Mock Test - <span id="examYear"></span>  by<span><a href="https://onlibry.xyz" class="onlibry" target="_blank">Onlibry.xyz</a></span></h2>
        <div class="timer" id="timer">150:00</div>
    </div>
    
    <div id="loading" class="loading">
        Loading exam questions...
    </div>
    
    <div id="examContainer" class="exam-container hidden">
        <div class="question-section">
            <div id="questionContainer">
                <!-- Question and options will be loaded here -->
            </div>
            
            <div class="action-buttons">
                <button id="prevBtn" class="btn btn-primary">Previous</button>
                <button id="markBtn" class="btn">Mark for Review</button>
                <button id="nextBtn" class="btn btn-primary">Next</button>
            </div>
        </div>
        
        <div class="navigation">
            <h3>Question Navigation</h3>
            <p>Total Questions: <span id="totalQuestions">0</span></p>
            <div style="margin-top: 20px;">
                <button id="submitBtn" class="btn btn-danger">Submit Test</button>
            </div>
            <div class="question-nav" id="questionNav">
                <!-- Navigation buttons will be added here -->
            </div>
        </div>
    </div>
     <div class="exam-page-content" style="padding: 16px; background: #f9f9f9; border-radius: 10px; margin-bottom: 20px;">
  <h1 style="font-size: 1.5rem; margin-bottom: 10px;">Free ICET Mock Test</h1>
  <p style="margin-bottom: 10px;">
    Practice for the ICET (Integrated Common Entrance Test) with our free online mock test. This test includes <strong>200 multiple-choice questions</strong>, just like the real exam.
  </p>
  <ul style="margin-left: 20px; list-style-type: disc;">
    <li>Real Exam Pattern â€“ 200 Questions | 200 Marks | 2.5 Hours</li>
    <li>Includes Sections: Analytical Ability, Mathematical Ability, and Communication Ability</li>
    <li>Instant Scorecard after submission</li>
    <li>Auto-submits after timer ends (2hr 30min)</li>
    
  </ul>
  <p style="margin-top: 10px;">
    This mock test is designed to help you boost your preparation and assess your time management skills. All the best!
  </p>
</div>
    <script>
        const scriptUrl = 'https://script.google.com/macros/s/AKfycbyjh8oxAQyWxsjPtKblUqr8Q5pLpI69iZRRZv3clTKVKzeyQXHxLPZ_MzpENWXDFaW-/exec'; // Replace with your deployed web app URL
        let examData = [];
        let currentQuestion = 0;
        let answers = {};
        let markedQuestions = {};
        let timerInterval;
        let timeLeft = 150 * 60; // 150 minutes in seconds
        
        // Disable refresh and back button
        window.onload = function() {
            window.history.forward();
        };
        
        window.onbeforeunload = function() {
            return "Are you sure you want to leave? Your progress will be saved but the timer will continue running.";
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const year = localStorage.getItem('selectedYear');
            if (!year) {
                window.location.href = 'index.html';
                return;
            }
            
            document.getElementById('examYear').textContent = year;
            
            // Check if we're returning from submit attempt
            const returningFromSubmit = localStorage.getItem('returningFromSubmit');
            if (returningFromSubmit === 'true') {
                localStorage.removeItem('returningFromSubmit');
                resumeExam();
            } else {
                loadExamData(year);
            }
            
            startTimer();
        });
        
        function resumeExam() {
            // Load saved state
            const year = localStorage.getItem('selectedYear');
            const savedTime = localStorage.getItem(`examTime_${year}`);
            const savedAnswers = localStorage.getItem(`examAnswers_${year}`);
            const savedMarked = localStorage.getItem(`markedQuestions_${year}`);
            const savedCurrentQuestion = localStorage.getItem(`currentQuestion_${year}`);
            
            if (savedTime) timeLeft = parseInt(savedTime);
            if (savedAnswers) answers = JSON.parse(savedAnswers);
            if (savedMarked) markedQuestions = JSON.parse(savedMarked);
            if (savedCurrentQuestion) currentQuestion = parseInt(savedCurrentQuestion);
            
            loadExamData(year);
        }
        
        function loadExamData(year) {
            fetch(`${scriptUrl}?operation=getExam&year=${year}`)
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        examData = data.questions;
                        initializeExam();
                    } else {
                        throw new Error(data.message || 'Failed to load exam data');
                    }
                })
                .catch(error => {
                    document.getElementById('loading').innerHTML = 
                        `<p style="color:red">Error: ${error.message}</p>
                         <button onclick="window.location.href='index.html'">Back to Home</button>`;
                });
        }
        
        function initializeExam() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('examContainer').classList.remove('hidden');
            
            document.getElementById('totalQuestions').textContent = examData.length;
            createNavigationButtons();
            showQuestion(currentQuestion);
            
            // Event listeners
            document.getElementById('prevBtn').addEventListener('click', () => {
                if (currentQuestion > 0) {
                    showQuestion(currentQuestion - 1);
                }
            });
            
            document.getElementById('nextBtn').addEventListener('click', () => {
                if (currentQuestion < examData.length - 1) {
                    showQuestion(currentQuestion + 1);
                }
            });
            
            document.getElementById('markBtn').addEventListener('click', () => {
                toggleMarkedQuestion();
            });
            
            document.getElementById('submitBtn').addEventListener('click', () => {
                if (confirm('Are you sure you want to submit the test?')) {
                    localStorage.setItem('returningFromSubmit', 'true');
                    submitExam();
                }
            });
        }
        
        function showQuestion(index) {
            currentQuestion = index;
            const question = examData[index];
            const questionContainer = document.getElementById('questionContainer');
            
            // Save current question position
            localStorage.setItem(`currentQuestion_${localStorage.getItem('selectedYear')}`, index);
            
            // Build question HTML
            let questionHTML = `
                <h3>Question ${index + 1}</h3>
                <div class="question-text">${question.question.replace(/\n/g, "<br>")}</div>
            `;
            
            // Add image if available
            if (question.imageUrl) {
                questionHTML += `<img src="${question.imageUrl}" class="question-image" alt="Question image">`;
            }
            
            // Add options
            questionHTML += '<div class="options">';
            for (const [key, value] of Object.entries(question.options)) {
                const isSelected = answers[index] === key;
                questionHTML += `
                    <div class="option ${isSelected ? 'selected' : ''}" 
                         data-option="${key}" 
                         onclick="selectOption('${key}')">
                        <strong>${key}.</strong> ${value}
                    </div>
                `;
            }
            questionHTML += '</div>';
            
            questionContainer.innerHTML = questionHTML;
            
            // Update navigation buttons
            updateNavigationButtons();
            
            // Update mark button
            document.getElementById('markBtn').textContent = 
                markedQuestions[index] ? 'Unmark Question' : 'Mark for Review';
        }
        
        function selectOption(option) {
            answers[currentQuestion] = option;
            saveExamState();
            
            // Update UI
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('selected');
                if (opt.dataset.option === option) {
                    opt.classList.add('selected');
                }
            });
            
            // Update navigation
            updateNavigationButtons();
        }
        
        function toggleMarkedQuestion() {
            if (markedQuestions[currentQuestion]) {
                delete markedQuestions[currentQuestion];
            } else {
                markedQuestions[currentQuestion] = true;
            }
            
            saveExamState();
            
            document.getElementById('markBtn').textContent = 
                markedQuestions[currentQuestion] ? 'Unmark Question' : 'Mark for Review';
            
            updateNavigationButtons();
        }
        
        function createNavigationButtons() {
            const navContainer = document.getElementById('questionNav');
            navContainer.innerHTML = '';
            
            examData.forEach((_, index) => {
                const btn = document.createElement('button');
                btn.className = 'nav-btn';
                btn.textContent = index + 1;
                btn.onclick = () => showQuestion(index);
                
                navContainer.appendChild(btn);
            });
            
            updateNavigationButtons();
        }
        
        function updateNavigationButtons() {
            const navButtons = document.querySelectorAll('.nav-btn');
            
            navButtons.forEach((btn, index) => {
                btn.classList.remove('answered', 'marked');
                
                if (answers[index] !== undefined) {
                    btn.classList.add('answered');
                }
                
                if (markedQuestions[index]) {
                    btn.classList.add('marked');
                }
                
                if (index === currentQuestion) {
                    btn.style.border = '2px solid #2c3e50';
                } else {
                    btn.style.border = '1px solid #ddd';
                }
            });
            
            // Update prev/next buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = currentQuestion === examData.length - 1;
        }
        
        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                saveExamState();
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        
        function saveExamState() {
            const year = localStorage.getItem('selectedYear');
            localStorage.setItem(`examAnswers_${year}`, JSON.stringify(answers));
            localStorage.setItem(`markedQuestions_${year}`, JSON.stringify(markedQuestions));
            localStorage.setItem(`examTime_${year}`, timeLeft.toString());
            localStorage.setItem(`currentQuestion_${year}`, currentQuestion.toString());
        }
        
        function submitExam() {
            clearInterval(timerInterval);
            
            // Calculate score and track answers
            let score = 0;
            let answeredQuestions = 0;
            const userAnswers = {};
            
            examData.forEach((question, index) => {
                if (answers[index] !== undefined) {
                    answeredQuestions++;
                    userAnswers[index] = answers[index];
                    if (answers[index] === question.correctAnswer) {
                        score++;
                    }
                }
            });
            
            // Store results
            const results = {
                year: localStorage.getItem('selectedYear'),
                score: score,
                totalQuestions: examData.length,
                answers: userAnswers, // Only store answered questions
                correctAnswers: examData.reduce((acc, q, i) => {
                    acc[i] = q.correctAnswer;
                    return acc;
                }, {}),
                markedQuestions: markedQuestions,
                timeTaken: (150 * 60 - timeLeft) / 60, // in minutes
                answeredCount: answeredQuestions,
                unansweredCount: examData.length - answeredQuestions
            };
            
            // Clear exam state from localStorage
            const year = localStorage.getItem('selectedYear');
            localStorage.removeItem(`examAnswers_${year}`);
            localStorage.removeItem(`markedQuestions_${year}`);
            localStorage.removeItem(`examTime_${year}`);
            localStorage.removeItem(`currentQuestion_${year}`);
            
            localStorage.setItem('examResults', JSON.stringify(results));
            window.location.href = 'results.html';
        }
    </script>
</body>
</html>
